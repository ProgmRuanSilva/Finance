{"version":3,"file":"use-motify.js","sourceRoot":"","sources":["../../src/core/use-motify.ts"],"names":[],"mappings":"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","sourcesContent":["import { PresenceContext, usePresence } from 'framer-motion'\nimport { useCallback, useContext, useEffect } from 'react'\nimport type { TransformsStyle } from 'react-native'\nimport {\n  useAnimatedStyle,\n  useSharedValue,\n  withDecay,\n  withSpring,\n  withTiming,\n  withDelay,\n  withRepeat,\n  withSequence,\n  runOnJS,\n} from 'react-native-reanimated'\nimport type {\n  WithDecayConfig,\n  WithSpringConfig,\n  WithTimingConfig,\n} from 'react-native-reanimated'\n\nimport { PackageName } from './constants/package-name'\nimport type {\n  MotiProps,\n  MotiTransition,\n  SequenceItem,\n  Transforms,\n  TransitionConfig,\n  WithTransition,\n} from './types'\n\nconst debug = (...args: any[]) => {\n  'worklet'\n\n  // @ts-expect-error moti\n  if (!global.shouldDebugMoti) {\n    return\n  }\n\n  if (args) {\n    // hi\n  }\n  console.log('[moti]', ...args)\n}\n\nconst isColor = (styleKey: string) => {\n  'worklet'\n  const keys = {\n    backgroundColor: true,\n    borderBottomColor: true,\n    borderLeftColor: true,\n    borderRightColor: true,\n    borderTopColor: true,\n    color: true,\n    shadowColor: true,\n    borderColor: true,\n    borderEndColor: true,\n    borderStartColor: true,\n  }\n\n  return Boolean(keys[styleKey])\n}\n\nconst isTransform = (styleKey: string) => {\n  'worklet'\n\n  const transforms: Record<keyof Transforms, true> = {\n    perspective: true,\n    rotate: true,\n    rotateX: true,\n    rotateY: true,\n    rotateZ: true,\n    scale: true,\n    scaleX: true,\n    scaleY: true,\n    translateX: true,\n    translateY: true,\n    skewX: true,\n    skewY: true,\n  }\n\n  return Boolean(transforms[styleKey])\n}\n\nfunction animationDelay<Animate>(\n  _key: string,\n  transition: MotiTransition<Animate> | undefined,\n  defaultDelay?: number\n) {\n  'worklet'\n  const key = _key as keyof Animate\n  let delayMs: TransitionConfig['delay'] = defaultDelay\n\n  if (transition?.[key]?.delay != null) {\n    delayMs = transition?.[key]?.delay\n  } else if (transition?.delay != null) {\n    delayMs = transition.delay\n  }\n\n  return {\n    delayMs,\n  }\n}\n\nfunction animationConfig<Animate>(\n  styleProp: string,\n  transition: MotiTransition<Animate> | undefined\n) {\n  'worklet'\n\n  const key = styleProp as Extract<keyof Animate, string>\n  let repeatCount = 0\n  let repeatReverse = true\n\n  let animationType: Required<TransitionConfig>['type'] = 'spring'\n  if (isColor(key) || key === 'opacity') animationType = 'timing'\n\n  const styleSpecificTransition = transition?.[key]\n\n  // say that we're looking at `width`\n  // first, check if we have transition.width.type\n\n  if (styleSpecificTransition?.type) {\n    animationType = styleSpecificTransition.type\n  } else if (transition?.type) {\n    // otherwise, fallback to transition.type\n    animationType = transition.type\n  }\n\n  const loop = styleSpecificTransition?.loop ?? transition?.loop\n\n  if (loop != null) {\n    repeatCount = loop ? -1 : 0\n  }\n\n  if (styleSpecificTransition?.repeat != null) {\n    repeatCount = styleSpecificTransition?.repeat\n  } else if (transition?.repeat != null) {\n    repeatCount = transition.repeat\n  }\n\n  if (styleSpecificTransition?.repeatReverse != null) {\n    repeatReverse = styleSpecificTransition.repeatReverse\n  } else if (transition?.repeatReverse != null) {\n    repeatReverse = transition.repeatReverse\n  }\n\n  // debug({ loop, key, repeatCount, animationType })\n\n  let config = {}\n  // so sad, but fix it later :(\n  let animation = (...props: any): any => props\n\n  if (animationType === 'timing') {\n    const duration =\n      (transition?.[key] as WithTimingConfig | undefined)?.duration ??\n      (transition as WithTimingConfig | undefined)?.duration\n\n    const easing =\n      (transition?.[key] as WithTimingConfig | undefined)?.easing ??\n      (transition as WithTimingConfig | undefined)?.easing\n\n    if (easing) {\n      config['easing'] = easing\n    }\n    if (duration != null) {\n      config['duration'] = duration\n    }\n    animation = withTiming\n  } else if (animationType === 'spring') {\n    animation = withSpring\n    config = {} as WithSpringConfig\n    const configKeys: (keyof WithSpringConfig)[] = [\n      'damping',\n      'mass',\n      'overshootClamping',\n      'restDisplacementThreshold',\n      'restSpeedThreshold',\n      'stiffness',\n      'velocity',\n    ]\n    for (const configKey of configKeys) {\n      const styleSpecificConfig = transition?.[key]?.[configKey]\n      const transitionConfigForKey = transition?.[configKey]\n\n      if (styleSpecificConfig != null) {\n        config[configKey] = styleSpecificConfig\n      } else if (transitionConfigForKey != null) {\n        config[configKey] = transitionConfigForKey\n      }\n    }\n  } else if (animationType === 'decay') {\n    animation = withDecay\n    config = {\n      velocity: 2,\n      deceleration: 2,\n    }\n    const configKeys: (keyof WithDecayConfig)[] = [\n      'clamp',\n      'velocity',\n      'deceleration',\n      'velocityFactor',\n    ]\n    for (const configKey of configKeys) {\n      const styleSpecificConfig = transition?.[key]?.[configKey]\n      const transitionConfigForKey = transition?.[configKey]\n\n      if (styleSpecificConfig != null) {\n        config[configKey] = styleSpecificConfig\n      } else if (transitionConfigForKey != null) {\n        config[configKey] = transitionConfigForKey\n      }\n    }\n  }\n\n  return {\n    animation,\n    config,\n    repeatReverse,\n    repeatCount,\n    shouldRepeat: !!repeatCount,\n  }\n}\n\nconst getSequenceArray = (\n  sequenceKey: string,\n  sequenceArray: SequenceItem<any>[],\n  delayMs: number | undefined,\n  config: object,\n  animation: (...props: any) => any,\n  callback: (completed: boolean, value?: any) => void\n) => {\n  'worklet'\n\n  const sequence: any[] = []\n\n  for (const step of sequenceArray) {\n    const shouldPush =\n      typeof step === 'object'\n        ? step && step?.value != null && step?.value !== false\n        : step != null && step !== false\n    if (shouldPush) {\n      let stepDelay = delayMs\n      let stepValue = step\n      let stepConfig = Object.assign({}, config)\n      let stepAnimation = animation\n      if (typeof step === 'object') {\n        // not allowed in Reanimated: { delay, value, ...transition } = step\n        const stepTransition = Object.assign({}, step)\n\n        delete stepTransition.delay\n        delete stepTransition.value\n\n        const { config: inlineStepConfig, animation } = animationConfig(\n          sequenceKey,\n          stepTransition\n        )\n\n        stepConfig = Object.assign({}, stepConfig, inlineStepConfig)\n        stepAnimation = animation\n\n        if (step.delay != null) {\n          stepDelay = step.delay\n        }\n        stepValue = step.value\n      }\n\n      const sequenceValue = stepAnimation(stepValue, stepConfig, callback)\n      if (stepDelay != null) {\n        sequence.push(withDelay(stepDelay, sequenceValue))\n      } else {\n        sequence.push(sequenceValue)\n      }\n    }\n  }\n\n  return sequence\n}\n\nexport function useMotify<Animate>({\n  animate: animateProp,\n  from: fromProp = false,\n  transition: transitionProp,\n  exitTransition: exitTransitionProp,\n  delay: defaultDelay,\n  state,\n  stylePriority = 'animate',\n  onDidAnimate,\n  exit: exitProp,\n  animateInitialState = false,\n}: MotiProps<Animate>) {\n  const isMounted = useSharedValue(false)\n  const [isPresent, safeToUnmount] = usePresence()\n  const presence = useContext(PresenceContext)\n\n  const disableInitialAnimation =\n    presence?.initial === false && !animateInitialState\n  const custom = useCallback(() => {\n    'worklet'\n    return presence?.custom\n  }, [presence])\n\n  const reanimatedSafeToUnmount = useCallback(() => {\n    safeToUnmount?.()\n  }, [safeToUnmount])\n\n  const reanimatedOnDidAnimated = useCallback<NonNullable<typeof onDidAnimate>>(\n    (...args) => {\n      onDidAnimate?.(...args)\n    },\n    [onDidAnimate]\n  )\n\n  const hasExitStyle = Boolean(\n    typeof exitProp === 'function' ||\n      (typeof exitProp === 'object' &&\n        exitProp &&\n        Object.keys(exitProp).length > 0)\n  )\n\n  const style = useAnimatedStyle(() => {\n    const final = {\n      // initializing here fixes reanimated object.__defineProperty bug(?)\n      transform: [] as TransformsStyle['transform'],\n    }\n    const variantStyle: Animate & WithTransition = state?.__state?.value || {}\n\n    let animateStyle: Animate\n\n    if (typeof animateProp == 'function') {\n      animateStyle = (animateProp() || {}) as Animate\n    } else if (animateProp && 'value' in animateProp) {\n      animateStyle = (animateProp.value || {}) as Animate\n    } else {\n      animateStyle = (animateProp || {}) as Animate\n    }\n\n    debug('style', animateStyle)\n\n    const initialStyle = fromProp || {}\n    let exitStyle = exitProp || {}\n    if (typeof exitStyle === 'function') {\n      exitStyle = exitStyle(custom())\n    }\n\n    const isExiting = !isPresent && hasExitStyle\n\n    let mergedStyles: Animate = {} as Animate\n    if (stylePriority === 'state') {\n      mergedStyles = Object.assign({}, animateStyle, variantStyle)\n    } else {\n      mergedStyles = Object.assign({}, variantStyle, animateStyle)\n    }\n\n    if (\n      !isMounted.value &&\n      !disableInitialAnimation &&\n      Object.keys(initialStyle).length\n    ) {\n      mergedStyles = initialStyle as Animate\n    } else {\n      mergedStyles = Object.assign({}, initialStyle, mergedStyles)\n    }\n\n    if (isExiting && exitStyle) {\n      mergedStyles = Object.assign({}, exitStyle) as any\n    }\n\n    const exitingStyleProps: Record<string, boolean> = {}\n    for (const key in exitStyle || {}) {\n      const disabledExitStyles = {\n        position: true,\n        zIndex: true,\n      }\n      if (!disabledExitStyles[key]) {\n        exitingStyleProps[key] = true\n      }\n    }\n\n    // allow shared values as transitions\n    let transition: MotiTransition<Animate> | undefined\n    if (transitionProp && 'value' in transitionProp) {\n      transition = transitionProp.value\n    } else {\n      transition = transitionProp\n    }\n\n    // let the state prop drive transitions too\n    if (variantStyle.transition) {\n      transition = Object.assign({}, transition, variantStyle.transition)\n    }\n\n    if (isExiting && exitTransitionProp) {\n      let exitTransition: MotiTransition<Animate> | undefined\n      if (exitTransitionProp && 'value' in exitTransitionProp) {\n        exitTransition = exitTransitionProp.value\n      } else if (typeof exitTransitionProp == 'function') {\n        exitTransition = exitTransitionProp(custom())\n      } else {\n        exitTransition = exitTransitionProp\n      }\n\n      transition = Object.assign({}, transition, exitTransition)\n    }\n\n    for (const _key in mergedStyles) {\n      const key = _key as string\n      const value = mergedStyles[key]\n\n      const {\n        animation,\n        config,\n        shouldRepeat,\n        repeatCount,\n        repeatReverse,\n      } = animationConfig(key, transition)\n\n      const callback: (completed: boolean, value?: any) => void = (\n        completed,\n        recentValue\n      ) => {\n        if (onDidAnimate) {\n          runOnJS(reanimatedOnDidAnimated)(\n            // @ts-expect-error key is a string\n            key,\n            completed,\n            recentValue,\n            {\n              attemptedValue: value,\n            }\n          )\n        }\n        if (isExiting) {\n          exitingStyleProps[key] = false\n          const areStylesExiting = Object.values(exitingStyleProps).some(\n            Boolean\n          )\n          // if this is true, then we've finished our exit animations\n          if (!areStylesExiting) {\n            runOnJS(reanimatedSafeToUnmount)()\n          }\n        }\n      }\n\n      let { delayMs } = animationDelay(key, transition, defaultDelay)\n\n      if (value == null || value === false) {\n        // skip missing values\n        // this is useful if you want to do {opacity: loading && 1}\n        // without this, those values will break I think\n        continue\n      }\n\n      if (key === 'transform') {\n        if (!Array.isArray(value)) {\n          console.error(\n            `[${PackageName}]: Invalid transform value. Needs to be an array.`\n          )\n        } else {\n          for (const transformObject of value) {\n            final['transform'] = final['transform'] || []\n            const transformKey = Object.keys(transformObject)[0]\n            const transformValue = transformObject[transformKey]\n            const transform = {} as any\n\n            if (Array.isArray(transformValue)) {\n              // we have a sequence in this transform...\n              const sequence = getSequenceArray(\n                transformKey,\n                transformValue,\n                delayMs,\n                config,\n                animation,\n                callback\n              )\n\n              if (sequence.length) {\n                let finalValue = withSequence(sequence[0], ...sequence.slice(1))\n                if (shouldRepeat) {\n                  finalValue = withRepeat(\n                    finalValue,\n                    repeatCount,\n                    repeatReverse\n                  )\n                }\n                transform[transformKey] = finalValue\n              }\n            } else {\n              if (transition?.[transformKey]?.delay != null) {\n                delayMs = transition?.[transformKey]?.delay\n              }\n\n              let finalValue = animation(transformValue, config, callback)\n              if (shouldRepeat) {\n                finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n              }\n              if (delayMs != null) {\n                transform[transformKey] = withDelay(delayMs, finalValue)\n              } else {\n                transform[transformKey] = finalValue\n              }\n            }\n\n            if (Object.keys(transform).length) {\n              final['transform'].push(transform)\n            }\n          }\n        }\n      } else if (Array.isArray(value)) {\n        // we have a sequence\n\n        const sequence = getSequenceArray(\n          key,\n          value,\n          delayMs,\n          config,\n          animation,\n          callback\n        )\n        let finalValue = withSequence(sequence[0], ...sequence.slice(1))\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n\n        if (isTransform(key)) {\n          // we have a sequence of transforms\n          final['transform'] = final['transform'] || []\n\n          if (sequence.length) {\n            const transform = {}\n\n            transform[key] = finalValue\n\n            // @ts-expect-error transform had the wrong type\n            final['transform'].push(transform)\n          }\n        } else {\n          // we have a normal sequence of items\n          // shadows not supported\n          if (sequence.length) {\n            final[key] = finalValue\n          }\n        }\n      } else if (isTransform(key)) {\n        final['transform'] = final['transform'] || []\n        // const transformKey = Object.keys(transformProp)[0]\n        // const transformValue = transformProp[transformKey]\n\n        if (transition?.[key]?.delay != null) {\n          delayMs = transition?.[key]?.delay\n        }\n\n        const transform = {}\n        let finalValue = animation(value, config, callback)\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n        if (delayMs != null) {\n          transform[key] = withDelay(delayMs, finalValue)\n        } else {\n          transform[key] = finalValue\n        }\n\n        // @ts-expect-error transform had the wrong type\n        final['transform'].push(transform)\n      } else if (typeof value === 'object') {\n        // shadows\n        final[key] = {}\n        for (const innerStyleKey in value || {}) {\n          let finalValue = animation(value, config, callback)\n\n          if (shouldRepeat) {\n            finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n          }\n\n          if (delayMs != null) {\n            final[key][innerStyleKey] = withDelay(delayMs, finalValue)\n          } else {\n            final[key][innerStyleKey] = finalValue\n          }\n        }\n      } else {\n        let finalValue = animation(value, config, callback)\n        if (shouldRepeat) {\n          finalValue = withRepeat(finalValue, repeatCount, repeatReverse)\n        }\n\n        if (delayMs != null && typeof delayMs === 'number') {\n          final[key] = withDelay(delayMs, finalValue)\n        } else {\n          final[key] = finalValue\n        }\n      }\n    }\n\n    if (!final.transform?.length) {\n      delete final.transform\n    }\n\n    return final\n  }, [\n    animateProp,\n    custom,\n    defaultDelay,\n    disableInitialAnimation,\n    exitProp,\n    exitTransitionProp,\n    fromProp,\n    hasExitStyle,\n    isMounted,\n    isPresent,\n    onDidAnimate,\n    reanimatedOnDidAnimated,\n    reanimatedSafeToUnmount,\n    state,\n    stylePriority,\n    transitionProp,\n  ])\n\n  useEffect(() => {\n    isMounted.value = true\n  }, [isMounted])\n\n  useEffect(\n    function allowUnMountIfMissingExit() {\n      if (!isPresent && !hasExitStyle) {\n        reanimatedSafeToUnmount()\n      }\n    },\n    [hasExitStyle, isPresent, reanimatedSafeToUnmount]\n  )\n\n  return {\n    style,\n  }\n}\n"]}